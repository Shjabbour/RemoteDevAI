# Internationalization (i18n) Guide

## Overview

RemoteDevAI supports comprehensive internationalization across all platforms: web, mobile, and backend API. This document explains how the i18n system works and how to use it.

## Supported Languages

- ğŸ‡ºğŸ‡¸ **English (en)** - Default
- ğŸ‡ªğŸ‡¸ **Spanish (es)**
- ğŸ‡«ğŸ‡· **French (fr)**
- ğŸ‡©ğŸ‡ª **German (de)**
- ğŸ‡¨ğŸ‡³ **Chinese Simplified (zh)**
- ğŸ‡¯ğŸ‡µ **Japanese (ja)**

## Architecture

### Web App (Next.js)

**Library:** `next-intl`

**Location:** `apps/web/src/i18n/`

**Structure:**
```
apps/web/src/
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ config.ts          # Locale configuration
â”‚   â”œâ”€â”€ request.ts         # Server-side setup
â”‚   â”œâ”€â”€ formatting.ts      # Date/number/currency formatting
â”‚   â””â”€â”€ rtl.ts            # RTL support utilities
â”œâ”€â”€ messages/              # Translation files
â”‚   â”œâ”€â”€ en.json
â”‚   â”œâ”€â”€ es.json
â”‚   â”œâ”€â”€ fr.json
â”‚   â”œâ”€â”€ de.json
â”‚   â”œâ”€â”€ zh.json
â”‚   â””â”€â”€ ja.json
â””â”€â”€ components/
    â””â”€â”€ i18n/
        â””â”€â”€ LanguageSwitcher.tsx
```

**Usage in Components:**

```tsx
'use client';

import { useTranslations } from 'next-intl';

export default function MyComponent() {
  const t = useTranslations('common');

  return (
    <div>
      <h1>{t('buttons.getStarted')}</h1>
      <p>{t('labels.loading')}</p>
    </div>
  );
}
```

**Formatting Utilities:**

```tsx
import { formatDate, formatCurrency, formatRelativeTime } from '@/i18n/formatting';
import { useLocale } from 'next-intl';

export default function MyComponent() {
  const locale = useLocale();

  return (
    <div>
      <p>{formatDate(new Date(), locale)}</p>
      <p>{formatCurrency(29.99, locale)}</p>
      <p>{formatRelativeTime(new Date(), locale)}</p>
    </div>
  );
}
```

### Mobile App (React Native)

**Library:** `i18next` + `react-i18next`

**Location:** `apps/mobile/src/i18n/`

**Structure:**
```
apps/mobile/src/
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ index.ts           # i18n configuration
â”‚   â””â”€â”€ locales/           # Translation files
â”‚       â”œâ”€â”€ en.json
â”‚       â”œâ”€â”€ es.json
â”‚       â”œâ”€â”€ fr.json
â”‚       â”œâ”€â”€ de.json
â”‚       â”œâ”€â”€ zh.json
â”‚       â””â”€â”€ ja.json
â””â”€â”€ components/
    â””â”€â”€ LanguageSwitcher.tsx
```

**Usage in Components:**

```tsx
import { useTranslation } from 'react-i18next';

export default function MyComponent() {
  const { t } = useTranslation();

  return (
    <View>
      <Text>{t('common.buttons.getStarted')}</Text>
      <Text>{t('common.labels.loading')}</Text>
    </View>
  );
}
```

**Change Language:**

```tsx
import { changeLanguage } from '../i18n';

// Change to Spanish
await changeLanguage('es');
```

### Backend API (Express)

**Location:** `apps/cloud/src/i18n/`

**Structure:**
```
apps/cloud/src/
â””â”€â”€ i18n/
    â””â”€â”€ index.ts           # Backend i18n utilities
```

**Usage in Routes:**

```typescript
import { getLocaleFromRequest, formatErrorResponse } from '../i18n';

app.get('/api/data', (req, res) => {
  const locale = getLocaleFromRequest(req);

  // Return localized error
  return res.status(404).json(
    formatErrorResponse(locale, 'notFound')
  );
});
```

**Middleware:**

```typescript
import { localeMiddleware } from './i18n';

app.use(localeMiddleware);

// Now req.locale is available in all routes
app.get('/api/data', (req, res) => {
  const locale = req.locale; // Automatically detected
});
```

### Shared Utilities

**Location:** `packages/shared/src/i18n/`

**Exports:**
- Locale types and constants
- Error message translations
- Validation helpers

**Usage:**

```typescript
import { getErrorMessage, isValidLocale } from '@remotedevai/shared/i18n';

if (isValidLocale('fr')) {
  const error = getErrorMessage('fr', 'validation', 'required', { field: 'Email' });
}
```

## Translation File Structure

### Web App Format

```json
{
  "common": {
    "buttons": {
      "getStarted": "Get Started",
      "save": "Save"
    },
    "labels": {
      "email": "Email",
      "password": "Password"
    }
  },
  "landing": {
    "hero": {
      "title": "Code From",
      "subtitle": "Work on your projects remotely..."
    }
  },
  "dashboard": {
    "welcome": "Welcome back, {name}",
    "stats": {
      "totalProjects": "Total Projects"
    }
  }
}
```

### Using Variables

```tsx
// In translation file:
{
  "welcome": "Welcome back, {name}",
  "items": "You have {count} items"
}

// In component:
t('welcome', { name: 'John' })
t('items', { count: 5 })
```

## Language Switcher Component

### Web

```tsx
import LanguageSwitcher from '@/components/i18n/LanguageSwitcher';

// Dropdown variant
<LanguageSwitcher variant="dropdown" />

// Inline variant
<LanguageSwitcher variant="inline" />
```

### Mobile

```tsx
import LanguageSwitcher from '@/components/LanguageSwitcher';

// Modal variant
<LanguageSwitcher variant="modal" />

// Button variant
<LanguageSwitcher variant="button" />
```

## Date/Time/Number Formatting

### Date Formatting

```tsx
import { formatDate, formatDateTime, formatTime } from '@/i18n/formatting';

formatDate(new Date(), 'en')           // "January 1, 2025"
formatDateTime(new Date(), 'en')       // "January 1, 2025, 10:30 AM"
formatTime(new Date(), 'en')          // "10:30:45 AM"
```

### Relative Time

```tsx
import { formatRelativeTime } from '@/i18n/formatting';

formatRelativeTime(yesterday, 'en')    // "yesterday"
formatRelativeTime(nextWeek, 'en')     // "in 7 days"
```

### Number Formatting

```tsx
import { formatNumber, formatPercent } from '@/i18n/formatting';

formatNumber(1234567, 'en')           // "1,234,567"
formatNumber(1234567, 'de')           // "1.234.567"
formatPercent(0.856, 'en')            // "86%"
```

### Currency Formatting

```tsx
import { formatCurrency } from '@/i18n/formatting';

formatCurrency(29.99, 'en')           // "$29.99"
formatCurrency(29.99, 'es')           // "29,99 â‚¬"
formatCurrency(29.99, 'zh')           // "Â¥29.99"
```

### Duration & File Size

```tsx
import { formatDuration, formatFileSize } from '@/i18n/formatting';

formatDuration(3665, 'en')            // "1h 1m 5s"
formatFileSize(1536000, 'en')         // "1.46 MB"
```

## RTL (Right-to-Left) Support

The infrastructure is ready for RTL languages (Arabic, Hebrew).

### Usage

```tsx
import { useRTL } from '@/i18n/rtl';
import { useLocale } from 'next-intl';

export default function MyComponent() {
  const locale = useLocale();
  const { isRtl, direction, textAlign, cssVariables } = useRTL(locale);

  return (
    <div dir={direction} style={cssVariables}>
      <p style={{ textAlign }}>{t('content')}</p>
    </div>
  );
}
```

### Tailwind RTL Classes

```tsx
import { rtlTailwind } from '@/i18n/rtl';

const classes = rtlTailwind(locale, 'ml-4 text-left');
// LTR: "ml-4 text-left"
// RTL: "mr-4 text-right"
```

## Translation Management

### Admin Panel

Access the translation management panel at `/admin/translations`

Features:
- View all translation keys
- Edit translations inline
- Filter by missing translations
- Export translations to JSON
- Import translations from JSON
- Statistics and completeness tracking

### Translation Extraction Script

Run the extraction script to find untranslated strings:

```bash
npm run extract-translations
```

This will:
- Scan all source files for translation usage
- Check for missing translation keys
- Find unused translations
- Generate a report in `scripts/translation-report.json`

### Adding New Translations

1. Add the key to `apps/web/src/messages/en.json`:
```json
{
  "mySection": {
    "myKey": "My English text"
  }
}
```

2. Add the same key to all other language files:
```json
// es.json
{
  "mySection": {
    "myKey": "Mi texto en espaÃ±ol"
  }
}
```

3. Use in your component:
```tsx
const t = useTranslations('mySection');
<p>{t('myKey')}</p>
```

## Adding a New Language

### 1. Update Configuration

```typescript
// apps/web/src/i18n/config.ts
export const locales = ['en', 'es', 'fr', 'de', 'zh', 'ja', 'ar'] as const;

export const localeNames: Record<Locale, string> = {
  // ... existing
  ar: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
};

export const localeFlags: Record<Locale, string> = {
  // ... existing
  ar: 'ğŸ‡¸ğŸ‡¦',
};
```

### 2. Create Translation File

Create `apps/web/src/messages/ar.json` with all translation keys.

### 3. Update Mobile App

```typescript
// apps/mobile/src/i18n/index.ts
import ar from './locales/ar.json';

i18n.init({
  resources: {
    // ... existing
    ar: { translation: ar },
  },
});
```

### 4. Update Backend

```typescript
// apps/cloud/src/i18n/index.ts
export const apiErrors: Record<Locale, Record<string, string>> = {
  // ... existing
  ar: {
    serverError: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù…',
    // ...
  },
};
```

## Best Practices

### 1. Always Use Translation Keys

âŒ **Bad:**
```tsx
<button>Get Started</button>
```

âœ… **Good:**
```tsx
<button>{t('common.buttons.getStarted')}</button>
```

### 2. Use Descriptive Keys

âŒ **Bad:**
```json
{ "btn1": "Submit" }
```

âœ… **Good:**
```json
{ "buttons.submit": "Submit" }
```

### 3. Group Related Translations

```json
{
  "auth": {
    "signIn": { },
    "signUp": { },
    "forgotPassword": { }
  },
  "dashboard": {
    "projects": { },
    "sessions": { }
  }
}
```

### 4. Use Variables for Dynamic Content

```json
{
  "greeting": "Hello, {name}!",
  "itemCount": "You have {count} items"
}
```

### 5. Keep Translations Consistent

Use the same terminology across all languages:
- "Sign In" (not "Login" in some places and "Sign In" in others)
- "Delete" (not "Remove" in some places)

### 6. Test All Languages

Before releasing, test the app in all supported languages to ensure:
- Text fits in UI elements
- Layouts work correctly
- No missing translations
- Plurals work correctly

### 7. Handle Pluralization

```json
{
  "items": {
    "zero": "No items",
    "one": "{count} item",
    "other": "{count} items"
  }
}
```

## Troubleshooting

### Missing Translations

If you see a key instead of translated text:
1. Check the translation file has the key
2. Verify the namespace is correct
3. Run `npm run extract-translations` to find missing keys

### Language Not Changing

1. Clear browser/app cache
2. Check localStorage for `preferred-locale`
3. Verify the locale is in the `locales` array

### Formatting Issues

1. Check the locale code is correct (e.g., 'en' not 'en-US')
2. Verify browser supports the locale for formatting
3. Use fallback values when needed

## Performance Considerations

### Code Splitting

Translation files are automatically code-split by Next.js and only loaded for the active locale.

### Caching

- Browser: Translations are cached in localStorage
- Backend: Consider using Redis for translation caching in production

### Bundle Size

- Each translation file adds ~5-15KB
- Use tree-shaking to remove unused translations in production

## Migration Guide

### From Hardcoded Strings

1. Find all hardcoded user-facing strings
2. Add them to translation files
3. Replace with translation keys
4. Run extraction script to verify

### Example:

**Before:**
```tsx
<h1>Welcome to RemoteDevAI</h1>
<p>Start coding from anywhere</p>
```

**After:**
```tsx
<h1>{t('landing.hero.title')}</h1>
<p>{t('landing.hero.subtitle')}</p>
```

## Resources

- [next-intl Documentation](https://next-intl-docs.vercel.app/)
- [i18next Documentation](https://www.i18next.com/)
- [Intl API Reference](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl)
- [Unicode CLDR](https://cldr.unicode.org/) - Locale data reference

## Support

For i18n-related issues:
1. Check this documentation
2. Run the extraction script
3. Check the translation files for the specific locale
4. Open an issue on GitHub with details
