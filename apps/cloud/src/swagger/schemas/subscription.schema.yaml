components:
  schemas:
    Subscription:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Unique subscription identifier
          example: "550e8400-e29b-41d4-a716-446655440004"
        userId:
          type: string
          format: uuid
          description: User ID
          example: "550e8400-e29b-41d4-a716-446655440001"
        stripeCustomerId:
          type: string
          description: Stripe customer ID
          example: "cus_PQRSTuvwxyz"
          nullable: true
        stripeSubscriptionId:
          type: string
          description: Stripe subscription ID
          example: "sub_1234567890"
          nullable: true
        stripePriceId:
          type: string
          description: Stripe price ID
          example: "price_1234567890"
          nullable: true
        tier:
          type: string
          enum: [FREE, PRO, ENTERPRISE]
          description: Subscription tier
          example: "PRO"
        status:
          type: string
          enum: [ACTIVE, PAST_DUE, CANCELED, INCOMPLETE, TRIALING]
          description: Subscription status
          example: "ACTIVE"
        currentPeriodStart:
          type: string
          format: date-time
          description: Current billing period start
          example: "2025-01-01T00:00:00Z"
          nullable: true
        currentPeriodEnd:
          type: string
          format: date-time
          description: Current billing period end
          example: "2025-02-01T00:00:00Z"
          nullable: true
        cancelAtPeriodEnd:
          type: boolean
          description: Whether subscription will cancel at period end
          example: false
        createdAt:
          type: string
          format: date-time
          example: "2025-01-01T00:00:00Z"
        updatedAt:
          type: string
          format: date-time
          example: "2025-01-15T10:00:00Z"
      required:
        - id
        - userId
        - tier
        - status
        - cancelAtPeriodEnd
        - createdAt
        - updatedAt

    SubscriptionStatus:
      type: object
      properties:
        tier:
          type: string
          enum: [FREE, PRO, ENTERPRISE]
          example: "PRO"
        status:
          type: string
          enum: [ACTIVE, PAST_DUE, CANCELED, INCOMPLETE, TRIALING]
          example: "ACTIVE"
        currentPeriodEnd:
          type: string
          format: date-time
          example: "2025-02-01T00:00:00Z"
          nullable: true
        cancelAtPeriodEnd:
          type: boolean
          example: false

    CreateCheckoutRequest:
      type: object
      required:
        - priceId
        - successUrl
        - cancelUrl
      properties:
        priceId:
          type: string
          description: Stripe price ID for the subscription plan
          example: "price_1234567890"
        successUrl:
          type: string
          format: uri
          description: URL to redirect to on successful payment
          example: "https://app.remotedevai.com/success"
        cancelUrl:
          type: string
          format: uri
          description: URL to redirect to on canceled payment
          example: "https://app.remotedevai.com/pricing"

    CheckoutResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            sessionId:
              type: string
              description: Stripe checkout session ID
              example: "cs_test_1234567890"
            url:
              type: string
              format: uri
              description: Stripe checkout URL
              example: "https://checkout.stripe.com/pay/cs_test_1234567890"
        message:
          type: string
          example: "Checkout session created"

    CreatePortalRequest:
      type: object
      required:
        - returnUrl
      properties:
        returnUrl:
          type: string
          format: uri
          description: URL to return to after managing subscription
          example: "https://app.remotedevai.com/settings"

    PortalResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            url:
              type: string
              format: uri
              description: Stripe customer portal URL
              example: "https://billing.stripe.com/session/1234567890"
        message:
          type: string
          example: "Portal session created"

    CancelSubscriptionRequest:
      type: object
      properties:
        immediate:
          type: boolean
          description: Whether to cancel immediately or at period end
          example: false
          default: false

    PricingPlans:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            pro:
              type: object
              properties:
                monthly:
                  type: string
                  example: "price_pro_monthly"
                yearly:
                  type: string
                  example: "price_pro_yearly"
            enterprise:
              type: object
              properties:
                monthly:
                  type: string
                  example: "price_enterprise_monthly"
                yearly:
                  type: string
                  example: "price_enterprise_yearly"
